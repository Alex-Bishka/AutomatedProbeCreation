<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}SAE Steering Scenarios{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>SAE Steering Scenarios</h1>
            <p class="subtitle">A tool for testing sparse autoencoder feature steering on behavioral scenarios</p>
            <nav>
                <!-- Manual Testing Section -->
                <div class="nav-row">
                    <span class="nav-section">Manual</span>
                    <a href="{{ url_for('index') }}" {% if request.endpoint == 'index' %}class="active"{% endif %}>Dashboard</a>
                    <a href="{{ url_for('features_page') }}" {% if request.endpoint == 'features_page' %}class="active"{% endif %}>Features</a>
                    <a href="{{ url_for('scenarios_page') }}" {% if request.endpoint == 'scenarios_page' %}class="active"{% endif %}>Scenarios</a>
                    <a href="{{ url_for('run_page') }}" {% if request.endpoint == 'run_page' %}class="active"{% endif %}>Run</a>
                    <a href="{{ url_for('runs_page') }}" {% if request.endpoint in ['runs_page', 'run_detail_page'] %}class="active"{% endif %}>Past Runs</a>
                </div>

                <!-- Automated Pipeline Section -->
                <div class="nav-row">
                    <span class="nav-section">Automated</span>
                    <a href="{{ url_for('pipeline_page') }}" {% if request.endpoint in ['pipeline_page', 'job_detail_page'] %}class="active"{% endif %}>Pipeline</a>
                    <a href="{{ url_for('review_page') }}" {% if request.endpoint == 'review_page' %}class="active"{% endif %}>Review</a>
                    <a href="{{ url_for('scenario_bank_page') }}" {% if request.endpoint == 'scenario_bank_page' %}class="active"{% endif %}>Scenario Bank</a>
                    <a href="{{ url_for('training_data_page') }}" {% if request.endpoint == 'training_data_page' %}class="active"{% endif %}>Training Data</a>
                    <a href="{{ url_for('probes_page') }}" {% if request.endpoint == 'probes_page' %}class="active"{% endif %}>Probes</a>
                    <a href="{{ url_for('config_page') }}" {% if request.endpoint == 'config_page' %}class="active"{% endif %}>Config</a>
                </div>
            </nav>
        </header>

        <main>
            {% block content %}{% endblock %}
        </main>
    </div>

    <script>
        // Utility functions
        async function apiCall(url, method = 'GET', data = null) {
            const options = {
                method,
                headers: { 'Content-Type': 'application/json' }
            };
            if (data) {
                options.body = JSON.stringify(data);
            }
            const response = await fetch(url, options);
            return response.json();
        }

        function toggleCollapsible(element) {
            element.classList.toggle('expanded');
            const content = element.nextElementSibling;
            content.classList.toggle('show');
        }
    </script>

    {% block scripts %}{% endblock %}
</body>
</html>
